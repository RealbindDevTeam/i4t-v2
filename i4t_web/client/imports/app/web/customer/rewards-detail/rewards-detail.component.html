<mat-card>
    <mat-card-title>{{'REWARD_DETAIL.REWARD_TITLE' | translate}}</mat-card-title>
    <mat-card-subtitle>{{'REWARD_DETAIL.REWARDS_MSG' | translate}}</mat-card-subtitle>
    <p style="color:red;" *ngIf="!_allowAddRewardsToOrder">{{'REWARD_DETAIL.ORDER_ERROR' | translate}}</p>
    <mat-card-content>
        <p style="font-weight: bold">{{'REWARD_DETAIL.POINTS_TO_REDEEM' | translate}}: {{_userRewardPoints}} {{'REWARD_DETAIL.POINTS' | translate}}</p>
        <mat-list>
            <span *ngFor="let reward of _rewards | async">
                <span *ngFor="let item of _items | async">
                    <ng-template [ngIf]="reward.item_id === item._id">
                        <mat-list-item>
                            <img mat-list-avatar class="custom br" *ngIf="item.image" src="{{ item.image.url }}">
                            <img mat-list-avatar class="custom br" *ngIf="!item.image" src="/images/default-plate.png">
                            <h4 mat-line>{{reward.item_quantity}} {{item.name}}</h4>
                            <mat-chip-list mat-line>
                                <mat-chip style="color: white;background-color: #4CAF50;">{{reward.points}} {{'REWARD_DETAIL.POINTS' | translate}}</mat-chip>
                            </mat-chip-list>
                            <p mat-line *ngIf="!getItemAvailability(item._id)" style="color: #D50000;font-weight: bold;">{{'REWARD_DETAIL.UNAVAILABLE' | translate}}</p>
                            <div *ngIf="_allowAddRewardsToOrder">
                                <button mat-button class="primary-button" *ngIf="reward.points <= _userRewardPoints && getItemAvailability(item._id)" (click)="AddRewardToOrder(reward.item_id, reward.item_quantity, reward.points)">{{'REWARD_DETAIL.REDEEM' | translate}}</button>
                                <button mat-button disabled *ngIf="reward.points > _userRewardPoints" style="color:#4CAF50">{{'REWARD_DETAIL.GET_POINTS' | translate}}!</button>
                            </div>
                        </mat-list-item>
                        <mat-divider class="divider"></mat-divider>
                    </ng-template>
                </span>
            </span>
        </mat-list>
    </mat-card-content>
    <mat-card-actions>
        <button mat-raised-button class="secondary-button" type="button" (click)="_dialogRef.close()">{{'CLOSE' | translate}}</button>
    </mat-card-actions>
</mat-card>
<div class="loading" *ngIf="_loading">
    <mat-spinner></mat-spinner>
</div>